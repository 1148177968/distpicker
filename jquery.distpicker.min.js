/*! distpicker v0.1.0 | (c) 2014 Fengyuan Chen */
!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(window.jQuery)}(function(a){"use strict";function b(b,c){this.$element=a(b),this.isSelected=!1,this.init(c)}if("undefined"==typeof DistPickerData)throw new Error("The file 'jquery.distpicker.data.js' must be included!");b.defaults={province:"—— 省 ——",city:"—— 市 ——",district:"—— 区 ——"},b.prototype={constructor:b,data:DistPickerData,init:function(c){var d=this.$element.find("select"),e=d.length,f=(this.$element.find("select[data-province]"),this.$element.find("select[data-city]"),this.$element.find("select[data-district]"),{});0!==e&&(c=a.isPlainObject(c)?c:{},d.each(function(){a.extend(f,a(this).data())}),f.province?(b.defaults.province=f.province,this.$province=d.filter("select[data-province]")):this.$province=e>=0?d.eq(0):d,f.city?(b.defaults.city=f.city,this.$city=d.filter("select[data-city]")):this.$city=e>=1?d.eq(1):null,f.district?(b.defaults.district=f.district,this.$district=d.filter("select[data-district]")):this.$district=e>=2?d.eq(2):null,this.defaults=a.extend({},b.defaults,c),this.active())},active:function(){this.output("province"),this.output("city"),this.output("district"),this.change()},change:function(){var a=this;this.$province&&this.$province.change(function(){a.output("city"),a.output("district")}),this.$city&&this.$city.change(function(){a.output("district")})},output:function(b){var c=1,d={},e=[],f="",g=this["$"+b],h=this;g&&(f=this.defaults[b],c="province"===b?1:"city"===b?this.$province.find("option:selected").data().zipcode:"district"===b?this.$city.find("option:selected").data().zipcode:c,d=a.isNumeric(c)?this.data[c]:{},a.each(d,function(a,b){var c=b===f;c&&(h.isSelected=!0),e.push(h.template({zipcode:a,address:b,selected:c}))}),this.isSelected||e.unshift(h.template({zipcode:"",address:f,selected:!1})),g.html(e.join("")))},template:function(b){var c={zipcode:"",address:"",selected:!1};return a.extend(c,b),['<option value="',c.address&&c.zipcode?c.address:"",'" data-zipcode="',c.zipcode?c.zipcode:"",'"',c.selected?" selected":"",">",c.address,"</option>"].join("")}},a.fn.distpicker=function(c){return this.each(function(){a(this).data("distpicker",new b(this,c))})},a.fn.distpicker.Constructor=b,a(function(){a("*[data-distpicker]").distpicker()})});